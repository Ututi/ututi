User information import
=======================

First we log in to be able to see the user list.

    >>> browser = Browser()
    >>> browser.open('http://localhost/')
    >>> browser.getControl('Email:').value = "admin@ututi.lt"
    >>> browser.getControl('Password:').value = "asdasd"
    >>> browser.getControl('Login').click()
    >>> browser.open('http://localhost/admin/users')

There is one initial user:

    >>> browser.printQuery("id('user_list')//li/text()")
    Adminas Adminovix

We go to the import page. There we have a form to upload a user CSV file:

    >>> browser.open('http://localhost/admin')
    >>> form = browser.getForm(name='user_import')
    >>> csv_data = 'domas, {SSHA}o4nmuRFCZCGxWpvz7FSd4I4wGhTrSfPH4tUc, Domas Monkus, domas@ututi.lt, 2009/05/20, 2009/06/06, '
    >>> import cStringIO
    >>> form.getControl('CSV File').add_file(cStringIO.StringIO(csv_data),
    ...                                      'text/plain',
    ...                                       'users.csv')
    >>> form.getControl('Upload').click()
    >>> browser.open('http://localhost/admin/users')
    >>> browser.printQuery("id('user_list')//li/text()")
    Adminas Adminovix
    Domas Monkus

Now we will log out and see if we can log back in as the imported user.

    >>> browser.open('http://localhost/')
    >>> browser.getLink('Log out').click()

    >>> browser.getControl('Email:').value = "domas@ututi.lt"
    >>> browser.getControl('Password:').value = "asdasd"
    >>> browser.getControl('Login').click()
    >>> print browser.contents
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
      <head>
      <title>UTUTI â€“ student information online</title>
      </head>
      <body>
    <h1>Welcome Domas Monkus!</h1>
    <a href="/logout">Log out</a>
      </body>
    </html>

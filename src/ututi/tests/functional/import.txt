User information import
=======================

First we log in to be able to see the user list.

    >>> browser = Browser.logIn()

    >>> browser.open('http://localhost/admin')
    >>> browser.printQuery('id(page-content)//h2')

    >>> browser.open('http://localhost/admin/users')

There is one initial user:

    >>> browser.printQuery("id('user_list')")
    <table...
    ...Third user...
    ...Second user...
    ...Alternative user...
    ...Adminas Adminovix...

We go to the import page. There we have a form to upload a user CSV file:

    >>> browser.open('http://localhost/admin/import_csv')
    >>> form = browser.getForm(name='import_users')
    >>> csv_data = 'domas, {SSHA}o4nmuRFCZCGxWpvz7FSd4I4wGhTrSfPH4tUc, Domas Monkus, domas@ututi.lt, 2009/05/20, 2009/06/06, '
    >>> import cStringIO
    >>> form.getControl('CSV File').add_file(cStringIO.StringIO(csv_data),
    ...                                      'text/plain',
    ...                                       'users.csv')
    >>> form.getControl('Upload').click()
    >>> browser.open('http://localhost/admin/users')
    >>> browser.printQuery("id('user_list')")
    <table...
    ...Domas Monkus...

Now we will log out and see if we can log back in as the imported user.

    >>> browser.open('http://localhost/')
    >>> browser.getLink('log out').click()

    >>> form = browser.getForm('loginForm')
    >>> form.getControl('Email').value = "domas@ututi.lt"
    >>> form.getControl('Password').value = "asdasd"
    >>> form.getControl('Login').click()

XXX test more than 1 user import
XXX test importing the same file twice
XXX test importing with mixed case emails

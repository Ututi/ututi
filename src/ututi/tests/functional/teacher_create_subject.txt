Test teacher's create subject workflow
======================================

Let's login as a verified teacher:

    >>> browser = Browser.logIn('benas@ututi.lt', 'password')

We click the big button to create the first subject:

    >>> browser.getControl('add courses').click()

The teacher has been assigned to default location (U-niversity),
so so location fields are prefilled:

    >>> browser.getControl('University:').value
    'U-niversity'

    >>> browser.getControl('Department:').value
    ''

Let's enter subject's location and title, and continue the wizard:

    >>> browser.getControl('University:').value = 'Vilniaus universitetas'
    >>> browser.getControl('Department:').value = 'Ekonomikos fakultetas'
    >>> browser.getControl('Subject title:').value = 'Math'
    >>> browser.getControl('Next').click()
    >>> browser.url
    'http://localhost/subjects/add_description'

Observe that the page doesn't show "Lecturer's" field.
Instead, a hidden value with teacher's name is silently submitted:

    >>> browser.getControl(name="lecturer").value
    'Benas'

Let's finish the wizard and create the subject:

    >>> browser.getControl('Create').click()
    >>> print browser.url
    http://localhost/subject/vu/ef/math

On the subject page Benas is listed as the lecturer:

    >>> browser.printQuery(".dalyko-info .teacher-list li", selector='cssselect', strip=True)
    <li>
        <a>Benas</a>
    </li>

This subject also appears on teacher's homepage:

    >>> browser.getLink('Home').click()
    >>> browser.printQuery("id('subject_list')//div[@class='subject-description-list']//dt//text()")
    Math

Let's go to the settings and change our location information:

    >>> browser.getLink('Settings').click()
    >>> browser.getControl('University').value = 'Vilniaus universitetas'
    >>> browser.getControl('Department').value = 'Ekonomikos fakultetas'
    >>> browser.getControl('Save').click()

Now back to home page and click to add another subject:

    >>> browser.getLink('back to home page').click()
    >>> browser.getControl('add courses').click()

This time both location fields will be prefilled by default 
(and hidden via CSS or javascript, he may edit them if he wants to):

    >>> browser.getControl('University:').value
    'Vilniaus universitetas'

    >>> browser.getControl('Department:').value
    'Ekonomikos fakultetas'

Let's fill out the form to create the subject:

    >>> browser.getControl('Subject title:').value = 'Literature'
    >>> browser.getControl('Next').click()
    >>> browser.getControl('Create').click()
    >>> print browser.url
    http://localhost/subject/vu/ef/literature

This subject also appears on teacher's homepage:

    >>> browser.getLink('Home').click()
    >>> browser.printQuery("id('subject_list')//div[@class='subject-description-list']//dt//text()")
    Math
    Literature

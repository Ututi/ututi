Test teacher's "biography" functionality
================================================

    >>> from ututi.lib.mailer import mail_queue
    >>> from ututi.lib.helpers import get_urls

User may press "I teach here" button in university page and have
the same registration flow as any other user. In the end, he
will be registered as teacher:

    >>> user = Browser()
    >>> user.open('http://localhost/school/uni')
    >>> user.click('I teach here')
    >>> user.getControl('Enter your academic email').value = 'user@example.com'
    >>> user.click('Sign Up')
    >>> msg = mail_queue.pop()
    >>> urls = get_urls(msg.payload())
    >>> user.open(urls[0])
    >>> user.click('Next')
    >>> user.getControl('Full name').value = 'User'
    >>> user.getControl('Password').value = 'password'
    >>> user.click('Next')
    >>> user.click('Skip')
    >>> user.click('Finish')

Even though teacher is not verified, he can fill his profile information.
From the "Get started" page he can click "Add my biography".

    >>> user.click('Add my biography')
    >>> user.printCssQuery('h1.page-title', strip=True)
    <h1>Your biography</h1>

    >>> user.getControl('Enter some facts from your biography').value = "Some <strong>cool</strong> biography!"
    >>> user.getControl('Save').click()

Biography should be created and we should see flash message.

    >>> user.printCssQuery('.flash-message-content', strip=True)
    <span>Your biography was updated.</span>

Now let's go to Public profile and look at biography tab. Here should be our biography.

    >>> user.click('Public profile')
    >>> user.click('Biography')
    >>> user.printCssQuery('#teacher-biography')
    <div id="teacher-biography" class="wiki-page">
         Some <strong>cool</strong> biography!
    </div>

After user is verified as a teacher, he still can edit his biography
in settings page:

    >>> admin = Browser.logIn()
    >>> admin.open('http://localhost/admin')
    >>> admin.click('Teachers')
    >>> admin.click('Confirm')

    >>> user.click('Settings')
    >>> user.click('Biography')
    >>> user.getControl('Enter some facts from your biography').value
    'Some <strong>cool</strong> biography!'
    >>> user.getControl('Enter some facts from your biography').value = 'Some <strong>very cool</strong> biography!'
    >>> user.getControl('Save').click()
    >>> user.printCssQuery('.flash-message-content', strip=True)
    <span>Your biography was updated.</span>
    >>> user.click('Public profile')
    >>> user.click('Biography')
    >>> user.printCssQuery('#teacher-biography')
    <div id="teacher-biography" class="wiki-page">
         Some <strong>very cool</strong> biography!
    </div>

Mail queue is irrelevant for this test:

    >>> mail_queue[:] = []

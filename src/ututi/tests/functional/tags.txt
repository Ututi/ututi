Subject and group tagging
=========================

Subjects can be tagged upon creation or when being edited.
    >>> browser = Browser()
    >>> browser.open('http://localhost/subjects/add')

    >>> browser.getControl(name='location-1').value = 'vu'
    >>> browser.getControl(name='location-2').value = 'ef'
    >>> browser.getControl('Id').value = 'mat_analize'
    >>> browser.getControl('Title').value = 'Testing subject'
    >>> browser.getControl('Tags').value = 'tag1, tag2, tag 3'
    >>> browser.getControl('Save').click()
    >>> browser.printQuery('//h1/text()')
    Testing subject

    >>> browser.url
    'http://localhost/subject/vu/ef/mat_analize'

Let's open the edit view and see if the tags were saved:

    >>> browser.open('http://localhost/subject/vu/ef/mat_analize/edit')
    >>> browser.getControl('Tags').value
    'tag1, tag2, tag 3'
    >>> browser.getControl('Tags').value = 'tag2, tag 3, new tag'
    >>> browser.getControl('Save').click()

    >>> browser.url
    'http://localhost/subject/vu/ef/mat_analize'

Once again, to check if the tags were saved:

    >>> browser.open('http://localhost/subject/vu/ef/mat_analize/edit')
    >>> browser.getControl('Tags').value
    'tag2, tag 3, new tag'

Let's try changing the location of the subject to get a clash with another subject:

    >>> browser.getControl(name='location-0').value = 'vu'
    >>> browser.getControl(name='location-1').value = ''
    >>> browser.getControl('Save').click()
    >>> browser.url
    'http://localhost/subject/vu/ef/mat_analize/update'
    >>> browser.printQuery("//span[@class='error-message']/text()")
    Such id already exists, choose a different one.

Groups can also be tagged.

    >>> browser.open('http://localhost/groups/add')
    >>> browser.getControl('Address').value = 'testing'
    >>> browser.getControl('Title').value = 'Test group'
    >>> browser.getControl('School').value = 'Vilniaus universitetas'
    >>> browser.getControl('Tags').value = 'tag1, tag2, tag 3 and 4'
    >>> browser.getControl('Save').click()
    >>> browser.printQuery('//h1/text()')
    Test group, 2009

Let's see if the tags are still there:

    >>> browser.getLink('Edit').click()
    >>> browser.getControl('Tags').value
    'tag1, tag2, tag 3 and 4'

Modifying these tags works in the edit view too.

    >>> browser.getControl('Tags').value =  'new tags'
    >>> browser.getControl('Save').click()
    >>> browser.getLink('Edit').click()
    >>> browser.getControl('Tags').value
    'new tags'

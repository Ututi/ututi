Test for simple subject page management
=======================================

Let's log in:

    >>> browser = Browser.logIn()

And go to the subjects list.

    >>> browser.open('http://localhost/subjects')

Pick a subject.

    >>> browser.getLink(u'Matematin\u0117 analiz\u0117'.encode('utf-8')).click()

And add a page for it.
    >>> browser.getLink('New page').click()
    >>> browser.getControl('Title').value = "How to be awesome!"
    >>> browser.getControl('Content').value = "Being Awesome is easy!"
    >>> browser.getControl('Save').click()

We should get redirected to the index view of the page we just created.

    >>> browser.url
    'http://localhost/subject/vu/mat_analize/page/3'

    >>> browser.printQuery("id('page_header')//h1/text()")
    How to be awesome!

    >>> browser.printQuery("id('page_content')")
    <div id="page_content">
      Being Awesome is easy!
    </div>

Let's edit the page now.

    >>> browser.getLink('Edit', index=1).click()
    >>> browser.getControl('Content').value = "<script>Yeah!</script>Being Awesome is very easy!"
    >>> browser.getControl('Save').click()

And see how it works.

    >>> browser.url
    'http://localhost/subject/vu/mat_analize/page/3'

    >>> browser.printQuery("id('page_header')//h1/text()")
    How to be awesome!

    >>> browser.printQuery("id('page_content')")
    <div id="page_content">
      Being Awesome is very easy!
    </div>

Let's go back now.

    >>> browser.getLink('Go back to Matematin\xc4\x97 analiz\xc4\x97').click()
    >>> browser.url
    'http://localhost/subject/vu/mat_analize'

We should see the list of pages.

    >>> browser.printQuery("id('subject_pages')")
    <div id="subject_pages" class="section">
      <h2>Pages</h2>
      <div class="container">
        <br />
        <a class="btn" href="/subject/vu/mat_analize/pages/add">
          <span>New page</span>
        </a>
        <div class="search-item snippet-page">
          <a href="/subject/vu/mat_analize/page/3" title="How to be awesome!" class="item-title larger">How to be awesome!</a>
          <span class="small" style="margin-left: 10px;">...</span>
          <a style="font-size: 0.9em;" href="/user/1">Adminas Adminovix</a>
          <div class="description">
          Yeah! Being Awesome is very easy!
        </div>
          <div class="item-tags">
            <a class="tag" title="Vilniaus universitetas" href="/profile/search?tags=Vilniaus+universitetas">
          Vilniaus universitetas
        </a>
          </div>
        </div>
      </div>
    </div>

Confirming bug fix: requesting page with a non-integer as its id was resulting in a crash.
    >>> browser.open('http://localhost/subject/vu/mat_analize/page/abrakadabra')
    Traceback (most recent call last):
    ...
    HTTPError: HTTP Error 404: Not Found


GeoIP
-----

Lets try login from Lithuanian IP.

    >>> res = app.post("/login",
    ...                params={'login': 'user@ututi.lt', 'password': 'password'},
    ...                headers={'X-Forwarded-For': '193.219.55.5'})


User should have location city and country.

    >>> from ututi.model import User
    >>> user = User.get('user@ututi.lt')
    >>> user.location_city
    'Vilnius'
    >>> user.location_country
    'LT'

Malformed headers don't break the application:

    >>> res = app.post("/login",
    ...                params={'login': 'user@ututi.lt', 'password': 'password'},
    ...                headers={'X-Forwarded-For': 'wtf'})

Lets try login from Polish IP with non ASCI symbols in city name.

    >>> res = app.post("/login",
    ...                params={'login': 'user@ututi.lt', 'password': 'password'},
    ...                headers={'X-Forwarded-For': '194.126.165.6'})

    >>> from ututi.model import User
    >>> user = User.get('user@ututi.lt')
    >>> user.location_city
    'Chorz\xc3\xb3w'
    >>> user.location_country
    'PL'

None in location_city don't braak the application:

    >>> res = app.post("/login",
    ...                params={'login': 'user@ututi.lt', 'password': 'password'},
    ...                headers={'X-Forwarded-For': '213.102.4.19'})

